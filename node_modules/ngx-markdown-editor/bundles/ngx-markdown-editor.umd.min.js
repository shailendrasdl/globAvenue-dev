!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ngx-markdown-editor",["exports","@angular/core","@angular/common","@angular/forms","@angular/platform-browser"],t):t((e=e||self)["ngx-markdown-editor"]={},e.ng.core,e.ng.common,e.ng.forms,e.ng.platformBrowser)}(this,(function(e,t,n,i,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function r(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,i){t(n,i,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var l={showPreviewPanel:!0,showBorder:!0,hideIcons:[],usingFontAwesome5:!1,scrollPastEnd:0,enablePreviewContentClick:!1,resizable:!1},c=function(){function e(e,n,i,o,r){void 0===e&&(e=!1),void 0===n&&(n=-1),this.required=e,this.maxlength=n,this._ngZone=i,this._renderer2=o,this._domSanitizer=r,this.hideToolbar=!1,this.height="300px",this._mode="editor",this._options={},this.onEditorLoaded=new t.EventEmitter,this.onPreviewDomChanged=new t.EventEmitter,this.hideIcons={},this.showPreviewPanel=!0,this.isFullScreen=!1,this.dragover=!1,this.isUploading=!1,this._onChange=function(e){},this._onTouched=function(){}}var n;return n=e,Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){var t=this;this._mode=e&&-1!==["editor","preview"].indexOf(e.toLowerCase())?e:"editor",setTimeout((function(){t._aceEditorIns&&"function"==typeof t._aceEditorIns.resize&&t._aceEditorIns.resize()}),100)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options||{}},set:function(e){var t=Object.assign(l,{},e),n={};"boolean"==typeof t.showPreviewPanel&&(this.showPreviewPanel=t.showPreviewPanel),Array.isArray(t.hideIcons)&&t.hideIcons.forEach((function(e){return n[e]=!0})),this._options=t,this.hideIcons=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markdownValue",{get:function(){return this._markdownValue||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_hasUploadFunction",{get:function(){return this.upload&&this.upload instanceof Function},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=new marked.Renderer;e.image=this._getRender("image"),e.code=this._getRender("code"),e.table=this._getRender("table"),e.listitem=this._getRender("listitem");var t={renderer:e,highlight:function(e){return hljs.highlightAuto(e).value}};this._markedJsOpt=Object.assign({},t,this.options.markedjsOpt)},e.prototype.ngAfterViewInit=function(){var e=this,t=this.aceEditorContainer.nativeElement,n=ace.edit(t);n.$blockScrolling=1/0,n.getSession().setUseWrapMode(!0),n.getSession().setMode("ace/mode/markdown"),n.setValue(this.markdownValue,1),n.setOption("scrollPastEnd",this._options.scrollPastEnd||0),n.on("change",(function(t){if(!e._isValueSettedByprogrammatically){var i=n.getValue();e._updateMarkdownValue(i,!0),e._onChange(e.markdownValue)}})),n.on("blur",(function(){e._onTouched()})),this.onEditorLoaded.next(n),this._aceEditorIns=n},e.prototype.ngOnDestroy=function(){this._aceEditorIns&&this._aceEditorIns.destroy()},e.prototype.writeValue=function(e){this._updateMarkdownValue(e,!1)},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.validate=function(e){var t=null;return this.required&&0===this.markdownValue.length&&(t={required:!0}),this.maxlength>0&&this.markdownValue.length>this.maxlength&&(t={maxlength:!0}),t},e.prototype.insertContent=function(e,t){if(this._aceEditorIns){var n=this._aceEditorIns.getSelectedText(),i=!!n,o=2,r="",a=this._aceEditorIns.selection.getRange();switch(e){case"Bold":r="Bold Text",n="**"+(n||r)+"**";break;case"Italic":r="Italic Text",n="*"+(n||r)+"*",o=1;break;case"Heading":r="Heading",n="# "+(n||r);break;case"Refrence":r="Refrence",n="> "+(n||r);break;case"Link":n="[](http://)",o=1;break;case"Image":n="![](http://)";break;case"Ul":n="- "+(n||r);break;case"Ol":n="1. "+(n||r),o=3;break;case"Code":r="Source Code",n="```language\r\n"+(n||r)+"\r\n```",o=3;break;case"Custom":n=t,o=0}this._aceEditorIns.session.replace(a,n),i||(a.start.column+=o,a.end.column=a.start.column+r.length,this._aceEditorIns.selection.setRange(a)),this._aceEditorIns.focus()}},e.prototype.togglePreview=function(){this.showPreviewPanel=!this.showPreviewPanel,this.editorResize()},e.prototype.previewPanelClick=function(e){!0!==this.options.enablePreviewContentClick&&(e.preventDefault(),e.stopImmediatePropagation())},e.prototype.fullScreen=function(){this.isFullScreen=!this.isFullScreen,this._renderer2.setStyle(document.body,"overflowY",this.isFullScreen?"hidden":"auto"),this.editorResize()},e.prototype.mdEditorResize=function(e){this.editorResize()},e.prototype.editorResize=function(e){var t=this;void 0===e&&(e=100),this._aceEditorIns&&(this._aceEditorResizeTimer&&clearTimeout(this._aceEditorResizeTimer),this._aceEditorResizeTimer=setTimeout((function(){t._aceEditorIns.resize(),t._aceEditorIns.focus()}),e))},e.prototype.onDragover=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&(this.dragover=!0)},e.prototype.onDrop=function(e){var t=this;e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&!this.isUploading&&(e.dataTransfer.files&&0!==e.dataTransfer.files.length?(this.isUploading=!0,Promise.resolve().then((function(){return t.upload(e.dataTransfer.files)})).then((function(e){var n,i;if(Array.isArray(e)){var o=[];try{for(var r=d(e),a=r.next();!a.done;a=r.next()){var s=a.value,l="["+s.name+"]("+s.url+")";s.isImg&&(l="!"+l),o.push(l)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.insertContent("Custom",o.join("\r\n"))}else console.warn("Invalid upload result. Please using follow this type `UploadResult`.");t.isUploading=!1,t.dragover=!1})).catch((function(e){console.error(e),t.isUploading=!1,t.dragover=!1}))):this.dragover=!1)},e.prototype.onDragleave=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&(this.dragover=!1)},e.prototype._updateMarkdownValue=function(e,t){void 0===t&&(t=!1);var n="string"==typeof e?e:(e||"").toString();this._markdownValue!==n&&(this._markdownValue=n,this._updateDom(),this._aceEditorIns&&!t&&(this._isValueSettedByprogrammatically=!0,this._aceEditorIns.setValue(n,1),this._isValueSettedByprogrammatically=!1))},e.prototype._updateDom=function(){var e=this;this._convertMarkdownToHtmlTimer&&clearTimeout(this._convertMarkdownToHtmlTimer),this._convertMarkdownToHtmlTimer=setTimeout((function(){Promise.resolve(e.markdownValue).then((function(t){return e.preRender&&e.preRender instanceof Function?e.preRender(t):t})).then((function(t){var n=marked(t||"",e._markedJsOpt);return e.postRender&&e.postRender instanceof Function?e.postRender(n):n})).then((function(t){e.previewHtml=e._domSanitizer.bypassSecurityTrustHtml(t),e.previewContainer&&e.previewContainer.nativeElement&&e._ngZone.runOutsideAngular((function(){e._renderer2.setProperty(e.previewContainer.nativeElement,"innerHTML",t),setTimeout((function(){e.onPreviewDomChanged.next(e.previewContainer.nativeElement)}),100)}))})).catch((function(e){console.error(e)}))}),100)},e.prototype._getRender=function(e){var t=this.options&&this.options.customRender&&this.options.customRender[e];if(t&&"function"==typeof t)return t;switch(e){case"image":return function(e,t,n){var i='<img style="max-width: 100%;" src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"};case"code":return function(e,t){return'<pre style="padding: 0; border-radius: 0;"><code class="hljs '+t+'">'+(!(!t||!hljs.getLanguage(t))?hljs.highlight(t,e).value:e)+"</code></pre>"};case"table":return function(e,t){return'<table class="table table-bordered">\n<thead>\n'+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"};case"listitem":return function(e,t,n){return/^\s*\[[x ]\]\s*/.test(e)||e.startsWith("<input")?"<li>"+(e=e.startsWith("<input")?e.replace('<input disabled="" type="checkbox">','<i class="fa fa-square-o"></i>').replace('<input checked="" disabled="" type="checkbox">','<i class="fa fa-check-square"></i>'):e.replace(/^\s*\[ \]\s*/,'<i class="fa fa-square-o"></i> ').replace(/^\s*\[x\]\s*/,'<i class="fa fa-check-square"></i> '))+"</li>":"<li>"+e+"</li>"}}},e.ctorParameters=function(){return[{type:Boolean,decorators:[{type:t.Attribute,args:["required"]}]},{type:Number,decorators:[{type:t.Attribute,args:["maxlength"]}]},{type:t.NgZone},{type:t.Renderer2},{type:o.DomSanitizer}]},r([t.ViewChild("aceEditor",{static:!0}),s("design:type",t.ElementRef)],e.prototype,"aceEditorContainer",void 0),r([t.ViewChild("previewContainer",{static:!0}),s("design:type",t.ElementRef)],e.prototype,"previewContainer",void 0),r([t.Input(),s("design:type",Boolean)],e.prototype,"hideToolbar",void 0),r([t.Input(),s("design:type",String)],e.prototype,"height",void 0),r([t.Input(),s("design:type",Function)],e.prototype,"preRender",void 0),r([t.Input(),s("design:type",Function)],e.prototype,"postRender",void 0),r([t.Input(),s("design:type",Function)],e.prototype,"upload",void 0),r([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"mode",null),r([t.Input(),s("design:type",Object),s("design:paramtypes",[Object])],e.prototype,"options",null),r([t.Output(),s("design:type",t.EventEmitter)],e.prototype,"onEditorLoaded",void 0),r([t.Output(),s("design:type",t.EventEmitter)],e.prototype,"onPreviewDomChanged",void 0),e=n=r([t.Component({selector:"md-editor",template:'<div class="md-editor-container" [class.font-awesome5]="options?.usingFontAwesome5" [class.fullscreen]="isFullScreen"\r\n  [class.md-editor-resizable]="options?.resizable" [style.height]="height">\r\n  <div class="md-layout">\r\n    <div class="tool-bar" *ngIf="!hideToolbar && mode != \'preview\'">\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button" title="Bold" (click)="insertContent(\'Bold\')"\r\n          *ngIf="!hideIcons.Bold">\r\n          <i class="fa fa-bold"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Italic" (click)="insertContent(\'Italic\')"\r\n          *ngIf="!hideIcons.Italic">\r\n          <i class="fa fa-italic"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Heading" (click)="insertContent(\'Heading\')"\r\n          *ngIf="!hideIcons.Heading">\r\n          <i class="fa fa-header"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Refrence" (click)="insertContent(\'Refrence\')"\r\n          *ngIf="!hideIcons.Refrence">\r\n          <i class="fa fa-quote-left"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button" title="Link" (click)="insertContent(\'Link\')"\r\n          *ngIf="!hideIcons.Link">\r\n          <i class="fa fa-link"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Image" (click)="insertContent(\'Image\')"\r\n          *ngIf="!hideIcons.Image">\r\n          <i class="fa fa-image"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button" title="Unordered List" (click)="insertContent(\'Ul\')"\r\n          *ngIf="!hideIcons.Ul">\r\n          <i class="fa fa-list-ul"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Ordered List" (click)="insertContent(\'Ol\')"\r\n          *ngIf="!hideIcons.Ol">\r\n          <i class="fa fa-list-ol"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Code Block" (click)="insertContent(\'Code\')"\r\n          *ngIf="!hideIcons.Code">\r\n          <i class="fa fa-file-code-o"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button"\r\n          [attr.title]="showPreviewPanel ? \'Hide Preview\' : \'Show Preview\'" (click)="togglePreview()"\r\n          *ngIf="!hideIcons.TogglePreview">\r\n          <i class="fa" [class.fa-eye]="!showPreviewPanel" [class.fa-eye-slash]="showPreviewPanel"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group pull-right hide-split">\r\n        <button class="btn btn-sm btn-default" type="button" [class.active]="isFullScreen" (click)="fullScreen()"\r\n          *ngIf="!hideIcons.FullScreen">\r\n          <i class="fa" [class.fa-arrows-alt]="!options?.usingFontAwesome5 || !isFullScreen"\r\n            [class.fa-compress]="options?.usingFontAwesome5 && isFullScreen"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="editor-container">\r\n      <div [class.dragover]="dragover" [style.display]="mode == \'preview\' ? \'none\' : null"\r\n        (dragover)="onDragover($event)">\r\n        <div class="drag-container">\r\n          <div class="upload-loading">\r\n            <i class="fa fa-upload" *ngIf="!isUploading"></i>\r\n            <i class="fa fa-spinner fa-pulse fa-fw" *ngIf="isUploading"></i>\r\n            <div class="text">{{ isUploading ? \'Uploading\' : \'Drag it here\' }}</div>\r\n          </div>\r\n        </div>\r\n        <div class="drag-container drag-container-mask" (drop)="onDrop($event)" (dragleave)="onDragleave($event)"></div>\r\n        <div class="editor-panel">\r\n          <div class="ace-editor" #aceEditor></div>\r\n        </div>\r\n      </div>\r\n      <div class="preview-container" [style.display]="(mode == \'preview\' || showPreviewPanel) ? \'block\' : \'none\'"\r\n        (click)="previewPanelClick($event)">\r\n        <div class="preview-panel" #previewContainer></div>\r\n      </div>\r\n    </div>\r\n    <div class="md-footer" *ngIf="maxlength > 0 && mode != \'preview\'">\r\n      <div class="text-right length-view">\r\n        {{ markdownValue?.length }} / {{ maxlength }}\r\n      </div>\r\n      <div class="resize-btn"></div>\r\n    </div>\r\n  </div>\r\n  <md-editor-resize-sensor *ngIf="options?.resizable" (resize)="mdEditorResize($event)"></md-editor-resize-sensor>\r\n</div>\r\n',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return n})),multi:!0},{provide:i.NG_VALIDATORS,useExisting:t.forwardRef((function(){return n})),multi:!0}],styles:['@charset "UTF-8";.md-editor-container{position:relative;height:100%;margin-bottom:15px;border:1px solid rgba(0,0,0,.1)}.md-editor-container.fullscreen{margin:0;position:fixed;border:0;top:0;left:0;width:100%!important;height:100%!important;z-index:99999999}.md-editor-container.md-editor-resizable:not(.fullscreen){resize:both;overflow:hidden;display:inline-block;width:100%}.md-editor-container.md-editor-resizable:not(.fullscreen) .md-layout .editor-container{height:calc(100% - 70px)}.md-editor-container.md-editor-resizable:not(.fullscreen) .md-footer{z-index:-1}.md-editor-container.font-awesome5 .fa.fa-header::before{content:""}.md-editor-container.font-awesome5 .fa.fa-file-code-o::before{content:""}.md-editor-container.font-awesome5 .fa.fa-arrows-alt::before{content:""}.md-editor-container .md-layout{height:100%;display:flex;flex-direction:column}.md-editor-container .md-layout .tool-bar{background-color:#f5f5f5;border-bottom:1px solid rgba(0,0,0,.1)}.md-editor-container .md-layout .tool-bar .btn-group{padding:6px}.md-editor-container .md-layout .tool-bar .btn-group:first-child>.btn:first-child::before{display:none}.md-editor-container .md-layout .tool-bar .btn-group>.btn:first-child::before{content:" ";background-color:#a9a9a9;width:1px;height:24px;left:-9px;top:2px;position:absolute}.md-editor-container .md-layout .tool-bar .btn-group.hide-split>.btn:first-child::before{display:none}.md-editor-container .md-layout .tool-bar .btn{margin-bottom:0}.md-editor-container .md-layout .editor-container{flex:1;display:flex;height:calc(100% - 100px)}.md-editor-container .md-layout .editor-container>div{flex:1}.md-editor-container .md-layout .editor-container>div .drag-container{display:none}.md-editor-container .md-layout .editor-container>div.dragover{position:relative}.md-editor-container .md-layout .editor-container>div.dragover .drag-container{display:block;position:absolute;left:0;top:0;right:0;bottom:0;z-index:10;background-color:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;font-size:50px;color:#fff}.md-editor-container .md-layout .editor-container>div.dragover .drag-container.drag-container-mask{background-color:transparent;z-index:11}.md-editor-container .md-layout .editor-container>div.dragover .drag-container .upload-loading{display:flex;flex-direction:column;align-items:center}.md-editor-container .md-layout .editor-container>div.dragover .drag-container .upload-loading .text{font-size:20px;margin-top:10px}.md-editor-container .md-layout .editor-container .editor-panel{height:100%}.md-editor-container .md-layout .editor-container .editor-panel .ace-editor{height:100%;min-height:100%}.md-editor-container .md-layout .preview-container{overflow:auto}.md-editor-container .md-layout .preview-container .preview-panel{height:100%;border-left:1px solid rgba(0,0,0,.1);background-color:#fff;padding:10px}.md-editor-container .md-layout .md-footer{background-color:#f0f0f0;border-top:1px solid rgba(0,0,0,.1);display:flex;align-items:center}.md-editor-container .md-layout .md-footer .length-view{flex:1;padding:4px 2px 0;font-size:12px;line-height:16px}.md-editor-container .md-layout .md-footer .resize-btn{width:17px}.md-editor-container .pull-right{float:right}']}),a(0,t.Attribute("required")),a(1,t.Attribute("maxlength")),s("design:paramtypes",[Boolean,Number,t.NgZone,t.Renderer2,o.DomSanitizer])],e)}(),u=function(){function e(e){this._ngZone=e,this.interval=500,this.resize=new t.EventEmitter,this.sizeInfo={width:0,height:0}}return e.prototype.ngAfterViewInit=function(){var e=this;this.sizeInfo={width:this.resizeSensor.nativeElement.offsetWidth,height:this.resizeSensor.nativeElement.offsetHeight},this._ngZone.runOutsideAngular((function(){setTimeout((function(){e.detectSize()}),e.interval)}))},e.prototype.detectSize=function(){var e=this,t=this.resizeSensor.nativeElement.offsetWidth,n=this.resizeSensor.nativeElement.offsetHeight;this.sizeInfo.width===t&&this.sizeInfo.height===n||(this.sizeInfo={width:t,height:n},this.resize.emit(this.sizeInfo)),setTimeout((function(){e.detectSize()}),this.interval)},e.ctorParameters=function(){return[{type:t.NgZone}]},r([t.ViewChild("resizeSensor",{static:!0}),s("design:type",t.ElementRef)],e.prototype,"resizeSensor",void 0),r([t.Input(),s("design:type",Number)],e.prototype,"interval",void 0),r([t.Output(),s("design:type",t.EventEmitter)],e.prototype,"resize",void 0),e=r([t.Component({selector:"md-editor-resize-sensor",template:'<div class="md-editor-resize-sensor" #resizeSensor></div>\r\n',styles:[".md-editor-resize-sensor{position:absolute;left:0;right:0;top:0;bottom:0;z-index:-1}"]}),s("design:paramtypes",[t.NgZone])],e)}(),p=function(){function e(){}return e=r([t.NgModule({declarations:[c,u],imports:[n.CommonModule,i.FormsModule],exports:[c,u]})],e)}();e.LMarkdownEditorModule=p,e.MarkdownEditorComponent=c,e.MarkdownEditorResizeSensorComponent=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-markdown-editor.umd.min.js.map